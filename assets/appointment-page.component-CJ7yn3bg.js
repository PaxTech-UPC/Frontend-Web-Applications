import{a as E}from"./index-xsH4HHeE.js";import{B as N}from"./base.service-Mq9yBqU9.js";import{R as _,a as b}from"./review.component-CT9QFMwF.js";import{U as S}from"./upcoming-client.component-BxkPO74P.js";import{_ as D,c as m,a as e,b as C,t as s,d,j as T,k as V,o as a,e as k,r as f,F as w,h as y,i as h}from"./index-C4IoDgKr.js";import{S as F}from"./sidebar-client.component-CrjeHRcR.js";import"./salon-profile-api.services-D79jQgIQ.js";import"./salon-list.component-BJ-0ylWg.js";import"./client-layout.component-DdISKCBD.js";import"./language-switcher.component-CPdu7mrM.js";class L{constructor({reservationId:t="",tipo:i="",client:c="",salon:p="",payment:o="",timeSlotStart:l="",timeSlotEnd:g="",worker:u=""}){var v;this.reservationId=t,this.tipo=i,this.worker=u,this.clientName=((v=c==null?void 0:c.user)==null?void 0:v.name)||"Unknown",this.salonName=(p==null?void 0:p.location)||"Unknown",this.paymentStatus=(o==null?void 0:o.status)||!1,this.timeSlotStart=l?new Date(l):null,this.timeSlotEnd=g?new Date(g):null}}const U="http://localhost:3000/reservationDetails",B=E.create({baseURL:U});class A extends N{static getAppointments(){return B.get("")}}class R{static toEntityFromResource(t){return new L(t)}static toEntitiesFromResponse(t){return t.data.map(i=>this.toEntityFromResource(i))}}const P={name:"appointment-component",props:{appointment:Object,view:{type:String,default:"detailed"}},methods:{formatTime(n){return new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},formatDate(n){const t=new Date(n);return`${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}`},handleEdit(){this.$emit("edit",this.appointment)},handleReschedule(){this.$emit("reschedule",this.appointment)},handleCancel(){this.$emit("cancel",this.appointment)}},components:{UpcomingAppointmentsClient:S,ReviewComponent:_},data(){return{appointments:[],reviews:[],isLoading:!0}},computed:{paymentStatusColor(){var t;return(((t=this.appointment)==null?void 0:t.payment)||"pending")==="paid"?"green":"red"},paymentStatusText(){var t;return(((t=this.appointment)==null?void 0:t.payment)||"pending")==="paid"?"Pagado":"Pendiente"}},async mounted(){try{const[n,t]=await Promise.all([A.getAppointments(),b.getAll()]);this.appointments=R.toEntitiesFromResponse(n),this.reviews=t.data,this.isLoading=!1}catch(n){console.error("Error al cargar datos:",n),this.isLoading=!1}}},x={key:0,class:"appointment-loading"},I={key:1},W={key:0,class:"appointment-block"},M={class:"appointment-actions"},j={key:1,class:"appointment-compact"},z={class:"appointment-content"},O={class:"appointment-header"},q={class:"appointment-details"};function G(n,t,i,c,p,o){return p.isLoading?(a(),m("div",x,t[3]||(t[3]=[e("p",null,"Cargando...",-1)]))):(a(),m("div",I,[i.view==="detailed"?(a(),m("div",W,[e("h4",null,s(i.appointment.tipo),1),e("p",null,[e("strong",null,s(n.$t("appointments.reservation.client"))+":",1),d(" "+s(i.appointment.clientName),1)]),e("p",null,[e("strong",null,s(n.$t("appointments.reservation.salon"))+":",1),d(" "+s(i.appointment.salonName),1)]),e("p",null,[e("strong",null,s(n.$t("appointments.reservation.schedule"))+":",1),d(" "+s(o.formatTime(i.appointment.timeSlotStart))+" - "+s(o.formatTime(i.appointment.timeSlotEnd)),1)]),e("p",null,[e("strong",null,s(n.$t("appointments.reservation.paymentStatus"))+":",1),e("span",{style:T({color:o.paymentStatusColor})},s(o.paymentStatusText),5)]),e("div",M,[e("button",{class:"action-button",onClick:t[0]||(t[0]=(...l)=>o.handleEdit&&o.handleEdit(...l))},t[4]||(t[4]=[e("i",{class:"pi pi-pencil"},null,-1)])),e("button",{class:"action-button",onClick:t[1]||(t[1]=(...l)=>o.handleReschedule&&o.handleReschedule(...l))},t[5]||(t[5]=[e("i",{class:"pi pi-calendar"},null,-1)])),e("button",{class:"action-button",onClick:t[2]||(t[2]=(...l)=>o.handleCancel&&o.handleCancel(...l))},t[6]||(t[6]=[e("i",{class:"pi pi-times"},null,-1)]))])])):i.view==="compact"?(a(),m("div",j,[t[11]||(t[11]=e("div",{class:"appointment-image"},null,-1)),e("div",z,[e("div",O,[e("h4",null,s(i.appointment.tipo)+" "+s(o.formatDate(i.appointment.timeSlotStart)),1)]),e("div",q,[e("p",null,[t[7]||(t[7]=e("i",{class:"pi pi-map-marker"},null,-1)),d(" "+s(i.appointment.salonName),1)]),e("p",null,[t[8]||(t[8]=e("i",{class:"pi pi-clock"},null,-1)),d(" "+s(o.formatTime(i.appointment.timeSlotStart))+" - "+s(o.formatTime(i.appointment.timeSlotEnd)),1)]),e("p",null,[t[9]||(t[9]=e("i",{class:"pi pi-user"},null,-1)),d(" "+s(i.appointment.stylistName),1)])]),t[10]||(t[10]=V('<div class="appointment-buttons" data-v-0efc0eef><button class="icon-button" data-v-0efc0eef><i class="pi pi-calendar" data-v-0efc0eef></i></button><button class="icon-button" data-v-0efc0eef><i class="pi pi-clock" data-v-0efc0eef></i></button><button class="icon-button" data-v-0efc0eef><i class="pi pi-share-alt" data-v-0efc0eef></i></button></div>',1))])])):C("",!0)]))}const H=D(P,[["render",G],["__scopeId","data-v-0efc0eef"]]),J={name:"AppointmentPageComponent",components:{UpcomingClientComponent:S,UpcomingAppointmentsClient:S,AppointmentComponent:H,ReviewComponent:_,SidebarClientComponent:F},data(){return{appointments:[],reviews:[]}},async mounted(){try{const[n,t]=await Promise.all([A.getAppointments(),b.getAll()]);this.appointments=R.toEntitiesFromResponse(n),this.reviews=t.data}catch(n){console.error("Error al cargar datos:",n)}},computed:{tomorrowAppointments(){const n=new Date;return n.setDate(n.getDate()+1),this.appointments.filter(t=>{const i=new Date(t.date);return i.getDate()===n.getDate()&&i.getMonth()===n.getMonth()})},nextWeekAppointments(){const n=new Date,t=new Date(n);t.setDate(n.getDate()+2);const i=new Date(n);return i.setDate(n.getDate()+7),this.appointments.filter(c=>{const p=new Date(c.date);return p>=t&&p<=i})},lastVisited(){return this.reviews[0]||null}}},K={class:"container"},Q={class:"sidebar"},X={class:"main-content"},Y={class:"appointments-section"},Z={class:"h3-container"},$={class:"h3-container"},tt={class:"h3-container"},et={class:"reviews-section"};function nt(n,t,i,c,p,o){const l=f("sidebar-client-component"),g=f("upcoming-client-component"),u=f("AppointmentComponent"),v=f("ReviewComponent");return a(),m("div",K,[e("aside",Q,[k(l)]),e("div",X,[e("div",Y,[k(g,{class:"upcoming-appo"}),e("h3",Z,s(n.$t("appointments.upcoming.tomorrow")),1),(a(!0),m(w,null,y(o.tomorrowAppointments,r=>(a(),h(u,{key:r.reservationId,appointment:r},null,8,["appointment"]))),128)),e("h3",$,s(n.$t("appointments.upcoming.next")),1),(a(!0),m(w,null,y(o.nextWeekAppointments,r=>(a(),h(u,{key:r.reservationId,appointment:r},null,8,["appointment"]))),128)),e("h3",tt,s(n.$t("appointments.upcoming.all")),1),(a(!0),m(w,null,y(p.appointments,r=>(a(),h(u,{key:r.reservationId,appointment:r},null,8,["appointment"]))),128))]),t[0]||(t[0]=e("hr",{class:"vertical-line"},null,-1)),e("div",et,[e("h3",null,s(n.$t("appointments.review.last")),1),o.lastVisited?(a(),h(v,{key:o.lastVisited.id,review:o.lastVisited},null,8,["review"])):C("",!0),e("h3",null,s(n.$t("appointments.review.all")),1),(a(!0),m(w,null,y(p.reviews,r=>(a(),h(v,{key:r.id,review:r},null,8,["review"]))),128))])])])}const ut=D(J,[["render",nt]]);export{ut as default};
