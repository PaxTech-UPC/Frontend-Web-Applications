import{_ as h,c,a as s,t as d,o as a,F as u,h as p,r as v,i as f,e as g}from"./index-B5gjtP8v.js";import{a as w}from"./index-xsH4HHeE.js";import{B as S}from"./base.service-Mq9yBqU9.js";const T={name:"reservation-component",props:{tipo:String,startTime:String,endTime:String,clientName:String}},W={class:"reservation-block"};function b(n,e,t,o,l,r){return a(),c("div",W,[s("strong",null,d(t.tipo),1),e[0]||(e[0]=s("br",null,null,-1)),s("span",null,d(t.clientName),1),e[1]||(e[1]=s("br",null,null,-1)),s("small",null,d(t.startTime)+" - "+d(t.endTime),1)])}const x=h(T,[["render",b],["__scopeId","data-v-4d7e8d45"]]),R="http://localhost:3000/reservationDetails",C=w.create({baseURL:R});class A extends S{constructor(e){super(e)}static getAll(){return C.get("")}}class D{constructor({reservationId:e="",tipo:t="",client:o={user:{name:""}},worker:l={name:""},timeSlot:r={start:"",end:""}}){this.reservationId=e,this.tipo=t,this.client=o,this.worker=l,this.timeSlot=r}}class F{static toEntityFromResource(e){return new D(e)}static toEntitiesFromResponse(e){return console.log(e.data.map(t=>this.toEntityFromResource(t))),e.data.map(t=>this.toEntityFromResource(t))}}const I={name:"calendar-component",components:{ReservationComponent:x},data(){return{days:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],hours:["07:00","08:00","09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00","21:00","22:00","23:00"],workers:["Todos"],currentWorkerIndex:0,calendars:[],reservations:[]}},computed:{currentWorker(){return this.workers[this.currentWorkerIndex]}},async mounted(){const n=await A.getAll();let e=F.toEntitiesFromResponse(n);e=e.filter(o=>o.worker&&o.worker.name),this.reservations=e,this.calendars=e;const t=[...new Set(e.map(o=>o.worker.name))];this.workers=["Todos",...t]},methods:{swapWorker(){this.currentWorkerIndex=(this.currentWorkerIndex+1)%this.workers.length},formatTime(n){const e=new Date(n),t=String(e.getUTCHours()).padStart(2,"0"),o=String(e.getUTCMinutes()).padStart(2,"0");return`${t}:${o}`},formatDay(n){return new Date(n).toLocaleDateString("en-US",{weekday:"long",timeZone:"UTC"})},filteredAppointments(n,e){return this.calendars.filter(t=>{const o=this.formatDay(t.timeSlot.start),l=this.formatTime(t.timeSlot.start),r=this.currentWorker==="Todos"||t.worker.name===this.currentWorker;return o===n&&l===e&&r})}}},B={class:"calendar-container"},E={class:"calendar-header"},U={class:"current-user"},$={class:"calendar-grid"},N={class:"calendar-days"},L={class:"calendar-body"},M={class:"time-label"};function V(n,e,t,o,l,r){const _=v("reservation-component");return a(),c("div",B,[s("div",E,[s("button",{onClick:e[0]||(e[0]=(...i)=>r.swapWorker&&r.swapWorker(...i))},"<"),s("div",U,d(r.currentWorker),1),s("button",{onClick:e[1]||(e[1]=(...i)=>r.swapWorker&&r.swapWorker(...i))},">")]),s("div",$,[s("div",N,[e[2]||(e[2]=s("div",{class:"time-label"},null,-1)),(a(!0),c(u,null,p(l.days,i=>(a(),c("div",{class:"day-label",key:i},d(i),1))),128))]),s("div",L,[(a(!0),c(u,null,p(l.hours,i=>(a(),c("div",{class:"hour-row",key:i},[s("div",M,d(i),1),(a(!0),c(u,null,p(l.days,k=>(a(),c("div",{class:"day-cell",key:k},[(a(!0),c(u,null,p(r.filteredAppointments(k,i),(m,y)=>(a(),f(_,{key:y,tipo:m.tipo,"start-time":r.formatTime(m.timeSlot.start),"end-time":r.formatTime(m.timeSlot.end),"client-name":m.client.user.name,reservation:""},null,8,["tipo","start-time","end-time","client-name"]))),128))]))),128))]))),128))])])])}const q=h(I,[["render",V],["__scopeId","data-v-b774a233"]]),H={name:"schedule-page-component",components:{CalendarComponent:q}},P={class:"p-4"};function Z(n,e,t,o,l,r){const _=v("calendar-component");return a(),c("div",P,[g(_)])}const J=h(H,[["render",Z]]);export{J as default};
